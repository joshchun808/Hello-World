<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>High Tech Fruit Store</title>
    <link rel="stylesheet" 
    href="products-style.css">

    <script src="./products_data.js"></script>

</head>
<body>
    <h1>High Tech Fruit Store</h1>

    <script>
        //Function from Lab11
        //Check if textbox isNonNegInt
        function checkQuantityTextbox(the_textbox) {
            var errs = isNonNegInt(the_textbox.value, true);
            document.getElementById(the_textbox + "_message").innerHTML;
        }
        
        //function to check if NonNegInt
        function isNonNegInt(q, returnErrors = false) {
            errors = []; // assume no errors at first
            if (Number(q) != q) errors.push('Not a number!'); // Check if string is a number value
            else {
                if (q < 0) errors.push('Negative value!'); // Check if it is non-negative
                if (parseInt(q) != q) errors.push('Not an integer!'); // Check that it is an integer
            }
    
            return (returnErrors ? errors : (errors.length == 0));
        }
    
    
    </script>

    <div><main>
        
        <form name="quantity_form" action="display_purchase.html" method="post"> <!--Opening tag for quantity form-->
        <script>
            //Code from WOD SmartPhonePProducts3
            //Loop to display products and quantity box
            //qty_textbox from Lab11, quantity enter
            for (i = 0; i < products.length; i++){
                document.write(`
                <section>
                <h2>${products[i].name}</h2> 
                <p>$${products[i].price}</p>
                <p>${products[i].quantity_available} available</p>
                <img src=${products[i].image}>
                <br>
                <label>Quantity:</label>
                <input type="text" name="qty_textbox${[i]}" value="0" onkeyup="checkQuantityTextbox(this);">
                <span id='qty_textbox${[i]}_message'></span>
                </section>
                `)
            }
        </script>
        <br>
        <input name="purchase_submit" type="submit" value="Purchase"> <!--Submit button-->
        </form>
    
    </main></div>

    <h1>Your One Stop Fruit Shop</h1>
</body>
</html>

